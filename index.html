<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sophia-1: Mestre da Geometria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0fdf4;
        }
        h1, h2, h3, .font-title {
            font-family: 'Fredoka', sans-serif;
        }
        .card {
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .step-box {
            border-left: 4px solid #3b82f6;
            background-color: #eff6ff;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .nav-btn.active {
            background-color: #ffffff;
            color: #166534;
            border-bottom: 4px solid #166534;
            font-weight: bold;
            transform: scale(1.05);
        }
        .shape-container svg {
            max-height: 140px;
            width: auto;
            margin: 0 auto;
        }
        .canguru-badge {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.8rem;
            text-transform: uppercase;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        /* Curiosidade Card */
        .fun-fact {
            background-color: #fffbeb;
            border: 2px dashed #fbbf24;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">
    <header class="bg-gradient-to-r from-green-600 to-emerald-600 text-white p-4 shadow-lg">
        <div class="max-w-5xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-3">
            <div class="flex items-center gap-2">
                <span class="text-3xl">üìê</span>
                <div>
                    <h1 class="text-2xl font-bold tracking-wide">Sophia-1</h1>
                    <p class="text-xs text-green-100 opacity-90">Academia de Geometria</p>
                </div>
            </div>
            <div class="flex gap-4">
                <div class="text-sm bg-white/20 px-4 py-1 rounded-full backdrop-blur-sm border border-white/30 font-bold">
                    Pontos: <span id="score-display">0</span>
                </div>
            </div>
        </div>
    </header>

    <nav class="bg-green-500 text-white shadow-md sticky top-0 z-20 overflow-x-auto">
        <div class="max-w-5xl mx-auto flex">
            <button onclick="renderSection('triangulos')" id="btn-triangulos" class="nav-btn active flex-1 py-3 px-4 text-center whitespace-nowrap hover:bg-green-400 transition">Tri√¢ngulos üî∫</button>
            <button onclick="renderSection('quadrilateros')" id="btn-quadrilateros" class="nav-btn flex-1 py-3 px-4 text-center whitespace-nowrap hover:bg-green-400 transition">Quadril√°teros üüß</button>
            <button onclick="renderSection('poligonos')" id="btn-poligonos" class="nav-btn flex-1 py-3 px-4 text-center whitespace-nowrap hover:bg-green-400 transition">Pol√≠gonos üî∑</button>
            <button onclick="renderSection('circulos')" id="btn-circulos" class="nav-btn flex-1 py-3 px-4 text-center whitespace-nowrap hover:bg-green-400 transition">C√≠rculos üî¥</button>
            <button onclick="renderSection('desafios')" id="btn-desafios" class="nav-btn flex-1 py-3 px-4 text-center whitespace-nowrap bg-yellow-500 hover:bg-yellow-400 text-yellow-900 font-bold border-l-4 border-yellow-600">üèÜ Desafios</button>
        </div>
    </nav>

    <main id="content-area" class="flex-grow max-w-5xl mx-auto w-full p-4 sm:p-6 pb-20">
        </main>

    <footer class="bg-slate-800 text-slate-400 text-center p-6 mt-8">
        <p class="mb-2">Desenvolvido com üß† e üíª.</p>
        <p class="text-xs">Treino para Canguru Matem√°tico e OBMEP.</p>
    </footer>

    <script>
        // --- DATA STRUCTURES (Adicionado campo 'funFact' e novos exemplos) ---
        const contentData = {
            triangulos: {
                title: "O Mundo dos Tri√¢ngulos",
                color: "blue",
                intro: "A forma mais forte da engenharia! Voc√™ sabia que as pontes usam tri√¢ngulos porque eles n√£o deformam?",
                funFact: "üí° **Curiosidade:** Se voc√™ pegar 3 gravetos de tamanhos aleat√≥rios, nem sempre conseguir√° fechar um tri√¢ngulo. A soma de dois lados menores tem que ser maior que o grand√£o! (Desigualdade Triangular).",
                cards: [
                    {
                        title: "1. Classifica√ß√£o (Fam√≠lias)",
                        content: `
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <h4 class="font-bold text-blue-600 mb-1">Pelos Lados</h4>
                                    <ul class="list-disc pl-4 space-y-1">
                                        <li><strong>Equil√°tero:</strong> Os 3 irm√£os iguais (60¬∞ cada).</li>
                                        <li><strong>Is√≥sceles:</strong> As 'pernas' iguais e base diferente.</li>
                                        <li><strong>Escaleno:</strong> O 'bagun√ßado', tudo diferente.</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold text-blue-600 mb-1">Pelos √Çngulos</h4>
                                    <ul class="list-disc pl-4 space-y-1">
                                        <li><strong>Ret√¢ngulo:</strong> Tem um canto reto (90¬∞) perfeito.</li>
                                        <li><strong>Acut√¢ngulo:</strong> Todos pontudos (< 90¬∞).</li>
                                        <li><strong>Obtus√¢ngulo:</strong> Um √¢ngulo bem aberto (> 90¬∞).</li>
                                    </ul>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "2. Super Poderes (F√≥rmulas)",
                        content: `
                            <div class="space-y-2 text-sm">
                                <div class="bg-blue-50 p-2 rounded border-l-4 border-blue-400"><strong>√Årea:</strong> (Base √ó Altura) dividido por 2. <br><em class="text-xs text-gray-500">"Metade de um ret√¢ngulo!"</em></div>
                                <div class="bg-red-50 p-2 rounded border-l-4 border-red-400"><strong>Pit√°goras:</strong> a¬≤ = b¬≤ + c¬≤ <br><em class="text-xs text-gray-500">"O escorregador ao quadrado √© igual √† soma dos lados ao quadrado."</em></div>
                            </div>
                        `
                    }
                ],
                examples: [
                    {
                        id: "ex_tri_1",
                        title: "Descubra o X (Tales)",
                        problem: "Temos retas paralelas cortadas. De um lado peda√ßos de 2 e 3 cm. Do outro, x e 9 cm. Quanto vale x?",
                        steps: [
                            "Imagine que √© um espelho. A propor√ß√£o de um lado √© igual ao do outro.",
                            "Monte a fra√ß√£o: <strong>2 est√° para 3</strong> assim como <strong>x est√° para 9</strong>.",
                            "Equa√ß√£o: <strong>2/3 = x/9</strong>",
                            "Multiplique cruzado (o 'X da Xuxa'): 3 . x = 2 . 9",
                            "3x = 18",
                            "x = 18 / 3 -> <strong>x = 6</strong>"
                        ],
                        shape: `<svg viewBox="0 0 100 100"><line x1="10" y1="20" x2="90" y2="20" stroke="black"/><line x1="10" y1="50" x2="90" y2="50" stroke="black"/><line x1="10" y1="80" x2="90" y2="80" stroke="black"/><line x1="25" y1="10" x2="40" y2="90" stroke="blue" stroke-width="2"/><line x1="55" y1="10" x2="70" y2="90" stroke="blue" stroke-width="2"/><text x="28" y="35" font-size="10">2</text><text x="35" y="65" font-size="10">3</text><text x="58" y="35" font-size="10">x</text><text x="65" y="65" font-size="10">9</text></svg>`
                    },
                    {
                        id: "ex_tri_2",
                        title: "Pit√°goras na Escada",
                        problem: "Uma escada de 5m est√° encostada num muro. O p√© da escada est√° a 3m do muro. Qual a altura que ela alcan√ßa?",
                        steps: [
                            "Identifique: Escada √© a inclina√ß√£o (Hipotenusa = 5). Ch√£o = 3. Altura = x.",
                            "Grito de Guerra: <strong>a¬≤ = b¬≤ + c¬≤</strong>",
                            "Substitua: <strong>5¬≤ = 3¬≤ + x¬≤</strong>",
                            "Calcule: 25 = 9 + x¬≤",
                            "Jogue o 9 pro outro lado: 25 - 9 = x¬≤",
                            "16 = x¬≤",
                            "Raiz quadrada de 16 √©? <strong>4 metros!</strong>"
                        ],
                        shape: `<svg viewBox="0 0 100 80"><polygon points="20,70 60,70 60,30" fill="none" stroke="#2563eb" stroke-width="2"/><line x1="20" y1="70" x2="60" y2="30" stroke="red" stroke-width="3"/><text x="35" y="45" font-size="10" fill="red">5m</text><text x="35" y="80" font-size="10">3m</text><text x="65" y="55" font-size="10">x</text></svg>`
                    }
                ]
            },
            quadrilateros: {
                title: "Reino dos Quadril√°teros",
                color: "orange",
                intro: "Figuras de 4 lados. Pense neles como telas de TV, pipas ou caixas.",
                funFact: "üéÆ **Curiosidade:** Todo quadrado √© um ret√¢ngulo, mas nem todo ret√¢ngulo √© um quadrado! O quadrado √© o 'mago supremo' porque ele tem lados iguais E √¢ngulos retos ao mesmo tempo.",
                cards: [
                    {
                        title: "1. A Fam√≠lia Real",
                        content: `
                            <ul class="text-sm list-disc pl-5 space-y-1">
                                <li><strong>Quadrado:</strong> O perfeitinho. Lados e √¢ngulos iguais.</li>
                                <li><strong>Ret√¢ngulo:</strong> O esticado. √Çngulos de 90¬∞.</li>
                                <li><strong>Losango:</strong> A Pipa. Lados iguais, mas pode ser tortinho.</li>
                                <li><strong>Trap√©zio:</strong> A bolsa. Tem um par de lados paralelos (bases).</li>
                            </ul>
                        `
                    },
                    {
                        title: "2. Como medir o ch√£o (√Åreas)",
                        content: `
                            <div class="grid grid-cols-1 gap-1 text-sm">
                                <p><strong>Ret√¢ngulo/Quadrado:</strong> Lado √ó Lado.</p>
                                <p><strong>Losango:</strong> (Diagonalz√£o √ó Diagonalzinha) / 2.</p>
                                <p><strong>Trap√©zio:</strong> M√©dia das bases √ó altura -> ((B+b).h)/2.</p>
                            </div>
                        `
                    }
                ],
                examples: [
                    {
                        id: "ex_quad_1",
                        title: "√Årea da Pipa (Losango)",
                        problem: "Uma pipa tem varetas (diagonais) de 10cm e 8cm. Qual √°rea de papel ela usa?",
                        steps: [
                            "F√≥rmula do Losango: <strong>(D . d) / 2</strong>",
                            "Diagonais s√£o as varetas cruzadas.",
                            "Conta: (10 . 8) / 2",
                            "80 / 2",
                            "<strong>40 cm¬≤</strong> de papel."
                        ],
                        shape: `<svg viewBox="0 0 100 80"><polygon points="50,10 80,40 50,70 20,40" fill="#fff7ed" stroke="#ea580c" stroke-width="2"/><line x1="50" y1="10" x2="50" y2="70" stroke="black" stroke-dasharray="2"/><line x1="20" y1="40" x2="80" y2="40" stroke="black" stroke-dasharray="2"/><text x="52" y="25" font-size="8">10</text><text x="25" y="38" font-size="8">8</text></svg>`
                    },
                    {
                        id: "ex_quad_2",
                        title: "Cerca do Terreno (Per√≠metro)",
                        problem: "Um terreno retangular tem 20m de frente e 30m de fundo. Quantos metros de cerca preciso?",
                        steps: [
                            "Per√≠metro √© a soma de TODOS os lados.",
                            "Se √© ret√¢ngulo, tem dois lados de 20 e dois de 30.",
                            "Conta: 20 + 20 + 30 + 30",
                            "40 + 60",
                            "<strong>100 metros</strong> de cerca."
                        ],
                        shape: `<svg viewBox="0 0 100 60"><rect x="10" y="10" width="80" height="40" fill="none" stroke="green" stroke-width="2"/><text x="45" y="58" font-size="10">20m</text><text x="92" y="35" font-size="10">30m</text></svg>`
                    }
                ]
            },
            poligonos: {
                title: "Pol√≠gonos Poderosos",
                color: "purple",
                intro: "De 5 lados at√© o infinito! Onde vivem o Pent√°gono e o Hex√°gono.",
                funFact: "üêù **Curiosidade:** As abelhas usam Hex√°gonos (6 lados) nas colmeias porque √© a forma que guarda mais mel gastando menos cera. √â a efici√™ncia m√°xima da natureza!",
                cards: [
                    {
                        title: "1. Regras do Clube",
                        content: `
                            <p class="text-sm mb-2"><strong>Soma dos √Çngulos Internos:</strong> Imagine picotar a figura em tri√¢ngulos. <br>F√≥rmula: (N¬∫ lados - 2) √ó 180¬∞.</p>
                            <p class="text-sm"><strong>Diagonais:</strong> Linhas que ligam cantos opostos. <br>F√≥rmula: n(n - 3) / 2.</p>
                        `
                    }
                ],
                examples: [
                    {
                        id: "ex_poli_1",
                        title: "√Çngulos do Oct√≥gono (UFC)",
                        problem: "Qual a soma dos √¢ngulos internos do ringue de luta (8 lados)?",
                        steps: [
                            "n = 8.",
                            "Tire 2: 8 - 2 = 6 (cabem 6 tri√¢ngulos dentro).",
                            "Multiplique por 180: 6 √ó 180.",
                            "6 √ó 100 = 600... 6 √ó 80 = 480...",
                            "Total: <strong>1080¬∞</strong>"
                        ],
                        shape: `<svg viewBox="0 0 100 100"><polygon points="30,10 70,10 90,30 90,70 70,90 30,90 10,70 10,30" fill="none" stroke="#7e22ce" stroke-width="2"/><text x="35" y="55" font-size="10">8 lados</text></svg>`
                    }
                ]
            },
            circulos: {
                title: "C√≠rculos e Redondos",
                color: "red",
                intro: "A forma perfeita. Sem cantos, sem come√ßo e sem fim.",
                funFact: "üçï **Curiosidade:** Se voc√™ dividir o comprimento de QUALQUER c√≠rculo pelo di√¢metro dele, o resultado √© sempre o mesmo n√∫mero m√°gico: 3,14159... (O famoso Pi - œÄ).",
                cards: [
                    {
                        title: "1. O Vocabul√°rio",
                        content: `
                            <ul class="text-sm list-disc pl-5">
                                <li><strong>Raio (R):</strong> Do centro at√© a borda (metade).</li>
                                <li><strong>Di√¢metro (D):</strong> De um lado ao outro passando pelo meio (2 √ó Raio).</li>
                                <li><strong>Corda:</strong> Liga dois pontos mas n√£o passa no meio.</li>
                            </ul>
                        `
                    },
                    {
                        title: "2. As Contas",
                        content: `
                            <p class="text-sm mb-1"><strong>Comprimento (A Borda):</strong> 2 . œÄ . R (Lembre: 'Dois Pierre').</p>
                            <p class="text-sm"><strong>√Årea (O Recheio):</strong> œÄ . R¬≤ (Lembre: 'Pierre ao quadrado').</p>
                        `
                    }
                ],
                examples: [
                    {
                        id: "ex_circ_1",
                        title: "√Årea da Pizza Gigante",
                        problem: "Uma pizza tem raio de 10cm. Qual a √°rea de queijo?",
                        steps: [
                            "F√≥rmula da √°rea (recheio): <strong>œÄ . R¬≤</strong>",
                            "R = 10.",
                            "10 ao quadrado √© 10 x 10 = 100.",
                            "√Årea = <strong>100œÄ cm¬≤</strong> (ou aprox. 314 cm¬≤)."
                        ],
                        shape: `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="#fecaca" stroke="#ef4444"/><path d="M50 50 L90 50" stroke="black"/><text x="60" y="45" font-size="10">R=10</text></svg>`
                    },
                    {
                        id: "ex_circ_2",
                        title: "Coroa Circular (O Donut)",
                        problem: "Temos um c√≠rculo grande (R=5) e um buraco no meio (r=3). Qual a √°rea da parte s√≥lida?",
                        steps: [
                            "L√≥gica: √Årea do Grande MENOS √Årea do Pequeno.",
                            "Grande: œÄ . 5¬≤ = 25œÄ.",
                            "Pequeno: œÄ . 3¬≤ = 9œÄ.",
                            "Subtra√ß√£o: 25œÄ - 9œÄ",
                            "Resultado: <strong>16œÄ</strong> unidades de √°rea."
                        ],
                        shape: `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="#fecaca" stroke="#ef4444"/><circle cx="50" cy="50" r="24" fill="white" stroke="#ef4444"/><text x="45" y="55" font-size="8">r=3</text><text x="45" y="25" font-size="8">R=5</text></svg>`
                    }
                ]
            }
        };

        const exercisesData = [
            // --- NOVOS DESAFIOS ADICIONADOS ---
            {
                id: 101,
                category: "L√≥gica Canguru",
                isCanguru: true,
                question: "O ano de 2025 √© um quadrado perfeito (45 √ó 45 = 2025). Daqui a quantos anos ocorrer√° o pr√≥ximo ano que tamb√©m ser√° um quadrado perfeito?",
                options: ["46 anos", "89 anos", "91 anos", "100 anos"],
                correctIndex: 2,
                explanation: [
                    "Hoje: 45¬≤ = 2025.",
                    "Pr√≥ximo: 46¬≤.",
                    "46 √ó 46 = (45+1)√ó(45+1) = 2116.",
                    "Diferen√ßa: 2116 - 2025.",
                    "Dica mental: 45+45+1 = 91 anos."
                ]
            },
            {
                id: 102,
                category: "Geometria Visual",
                isCanguru: true,
                question: "Dois quadrados de lado 10 cm s√£o colocados um em cima do outro. O bico de um est√° exatamente no centro do outro. Qual a √°rea coberta pelos dois juntos?",
                options: ["20 cm¬≤", "25 cm¬≤", "175 cm¬≤", "100 cm¬≤"],
                correctIndex: 1,
                explanation: [
                    "Truque de rota√ß√£o: Se voc√™ girar o quadrado de cima ao redor do centro, a √°rea sobreposta n√£o muda.",
                    "Fica f√°cil ver que ele cobre exatamente 1/4 do quadrado de baixo.",
                    "√Årea total do quadrado = 100.",
                    "Sobreposi√ß√£o = 100 / 4 = 25 cm¬≤."
                ]
            },
            {
                id: 106,
                category: "L√≥gica Temporal",
                isCanguru: true,
                question: "Um rel√≥gio digital mostra 20:25. Qual √© o tempo m√≠nimo para vermos novamente os mesmos quatro d√≠gitos (0, 2, 2, 5) em alguma ordem?",
                options: ["Em 4h 25min (00:52)", "Em 1h 37min (22:05)", "Em 2h 27min (22:50)", "Em 5h (01:25)"],
                correctIndex: 1,
                explanation: [
                    "Temos d√≠gitos 0, 2, 2, 5.",
                    "Pr√≥ximas horas poss√≠veis: 21h (n√£o tem 1), 22h (tem dois 2, falta 0 e 5).",
                    "Tentando 22h: Precisamos dos minutos 0 e 5. -> 22:05.",
                    "De 20:25 at√© 22:05.",
                    "20:25 -> 21:25 (1h) -> 22:05 (+40min). Total 1h 40min. Ops, c√°lculo exato: 20:25 at√© 22:25 s√£o 2h. Menos 20min = 1h 40min. Resposta mais pr√≥xima 22:05."
                ]
            },
            {
                id: 107,
                category: "Cubo Pintado",
                isCanguru: true,
                question: "Um cubo 3x3x3 √© feito de 27 cubinhos brancos. Pintamos o cubo grande de azul por fora. Quantos cubinhos pequenos continuam totalmente brancos?",
                options: ["1", "3", "5", "9"],
                correctIndex: 0,
                explanation: [
                    "Imagine as camadas descascando como uma cebola.",
                    "Os cubos da casca externa recebem tinta.",
                    "S√≥ o 'miolo' fica protegido.",
                    "Em um cubo 3x3x3, o miolo √© um cubo 1x1x1.",
                    "Resposta: Apenas 1 cubinho central."
                ]
            },
            // --- QUEST√ïES CL√ÅSSICAS ---
            {
                id: 1,
                category: "Tri√¢ngulos",
                isCanguru: false,
                question: "Um tri√¢ngulo is√≥sceles (2 lados iguais) tem um √¢ngulo no topo de 40¬∞. Quanto medem os √¢ngulos da base?",
                options: ["40¬∞ e 100¬∞", "70¬∞ e 70¬∞", "60¬∞ e 60¬∞", "50¬∞ e 90¬∞"],
                correctIndex: 1,
                explanation: ["Total = 180¬∞. Topo = 40¬∞. Sobra 140¬∞. Como a base √© igual: 140 √∑ 2 = 70¬∞."]
            },
            {
                id: 2,
                category: "Pit√°goras",
                isCanguru: false,
                question: "Qual o tamanho da diagonal de um ret√¢ngulo 3m x 4m?",
                options: ["5m", "6m", "7m", "12m"],
                correctIndex: 0,
                explanation: ["Tri√¢ngulo cl√°ssico 3-4-5. Ou fa√ßa: 3¬≤ + 4¬≤ = 9 + 16 = 25. Raiz de 25 √© 5."]
            },
            {
                id: 3,
                category: "Pol√≠gonos",
                isCanguru: false,
                question: "Quantos graus soma um Hex√°gono (6 lados)?",
                options: ["360¬∞", "540¬∞", "720¬∞", "900¬∞"],
                correctIndex: 2,
                explanation: ["F√≥rmula (n-2)x180. (6-2)x180 = 4x180 = 720¬∞."]
            },
            {
                id: 5,
                category: "√Åreas",
                isCanguru: false,
                question: "Se a √°rea de um quadrado √© 64 cm¬≤, quanto mede o lado?",
                options: ["4 cm", "8 cm", "16 cm", "32 cm"],
                correctIndex: 1,
                explanation: ["Qual n√∫mero vezes ele mesmo d√° 64? Tabuada do 8! (8x8=64)."]
            }
        ];

        // --- GLOBAL STATE ---
        let currentScore = 0;

        // --- RENDER FUNCTIONS ---
        function renderSection(sectionId) {
            // Update Nav
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${sectionId}`).classList.add('active');
            
            const container = document.getElementById('content-area');
            
            if (sectionId === 'desafios') {
                renderExercises(container);
                return;
            }

            const data = contentData[sectionId];
            
            // Generate Examples
            let examplesHtml = data.examples.map((ex, idx) => `
                <div class="bg-white rounded-xl shadow-lg border-l-4 border-${data.color}-500 overflow-hidden mb-8 transform transition hover:scale-[1.01]">
                    <div class="p-4 bg-${data.color}-50 flex justify-between items-center border-b border-${data.color}-100">
                        <h3 class="font-bold text-lg text-${data.color}-800 flex items-center gap-2">
                            <span>üìù</span> ${ex.title}
                        </h3>
                        <span class="text-xs font-bold uppercase text-${data.color}-500 bg-white px-3 py-1 rounded-full shadow-sm">Exemplo ${idx + 1}</span>
                    </div>
                    <div class="p-5 grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="shape-container flex items-center justify-center bg-slate-50 rounded-lg border border-slate-200 p-4">
                            ${ex.shape}
                        </div>
                        <div class="col-span-2 flex flex-col justify-between">
                            <div>
                                <p class="text-gray-800 mb-4 font-medium text-lg leading-relaxed">${ex.problem}</p>
                                <div id="steps-container-${ex.id}" class="space-y-3 mb-4"></div>
                            </div>
                            
                            <div class="flex gap-2 mt-2">
                                <button onclick="revealStep('${ex.id}', ${idx}, '${sectionId}')" id="btn-reveal-${ex.id}" class="bg-${data.color}-600 hover:bg-${data.color}-700 text-white py-2 px-6 rounded-lg font-bold shadow-md hover:shadow-lg transition flex items-center gap-2 w-fit">
                                    <span>Resolver Passo a Passo</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" /></svg>
                                </button>
                                <button onclick="resetStep('${ex.id}')" id="btn-reset-${ex.id}" class="hidden bg-gray-100 hover:bg-gray-200 text-gray-600 py-2 px-4 rounded-lg font-bold transition">
                                    üîÑ Reiniciar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // Generate Theory Cards
            let cardsHtml = data.cards.map(card => `
                <div class="card bg-white p-6 rounded-xl shadow border border-gray-100 h-full">
                    <h3 class="font-title text-xl text-${data.color}-600 mb-4 border-b pb-2 flex items-center gap-2">
                        ${card.title}
                    </h3>
                    <div class="text-gray-600 leading-relaxed">${card.content}</div>
                </div>
            `).join('');

            // Main Render
            container.innerHTML = `
                <div class="animate-fade-in space-y-8">
                    <div class="text-center">
                        <h2 class="text-4xl font-bold text-${data.color}-700 font-title mb-2">${data.title}</h2>
                        <p class="text-gray-600 text-lg max-w-2xl mx-auto">${data.intro}</p>
                    </div>

                    <div class="fun-fact p-4 rounded-lg shadow-sm text-yellow-900 flex gap-3 items-start max-w-3xl mx-auto">
                        <span class="text-2xl">ü§ì</span>
                        <p>${data.funFact}</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${cardsHtml}
                    </div>
                    
                    <div class="pt-8">
                        <h3 class="text-2xl font-bold text-gray-700 mb-6 font-title text-center flex items-center justify-center gap-2">
                            <span>üß†</span> Exemplos Pr√°ticos
                        </h3>
                        ${examplesHtml}
                    </div>
                </div>
            `;

            // Reset step counters
            data.examples.forEach(ex => {
                window[`stepIndex_${ex.id}`] = 0;
            });
        }

        function renderExercises(container) {
            let exercisesHtml = exercisesData.map((ex, index) => {
                const badge = ex.isCanguru 
                    ? `<span class="canguru-badge flex items-center gap-1">ü¶ò Canguru Matem√°tico</span>` 
                    : `<span class="bg-blue-100 text-blue-600 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide">Exerc√≠cio Escolar</span>`;
                
                const borderClass = ex.isCanguru ? "border-orange-400 bg-orange-50/50" : "border-blue-400 bg-white";
                
                return `
                <div class="p-6 rounded-xl shadow-md ${borderClass} border-l-8 mb-8 transition hover:shadow-lg">
                    <div class="flex justify-between items-start mb-4">
                        ${badge}
                        <span class="text-gray-400 font-mono text-sm">#${index + 1}</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-6">${ex.question}</h3>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4">
                        ${ex.options.map((opt, i) => `
                            <button onclick="checkAnswer(${ex.id}, ${i})" class="option-btn-${ex.id} w-full text-left p-4 rounded-lg bg-white border-2 border-gray-100 hover:border-yellow-400 hover:bg-yellow-50 transition shadow-sm font-medium text-gray-700">
                                <span class="inline-block w-6 font-bold text-gray-400">${['A','B','C','D'][i]}.</span> ${opt}
                            </button>
                        `).join('')}
                    </div>
                    
                    <div id="feedback-${ex.id}" class="hidden p-4 rounded-lg mb-3 text-sm animate-pulse"></div>
                    
                    <div id="solution-${ex.id}" class="hidden mt-4 bg-white p-5 rounded-lg border border-green-200 shadow-sm">
                        <h4 class="font-bold text-green-700 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
                            Explica√ß√£o Detalhada:
                        </h4>
                        <ul class="list-disc pl-5 space-y-2 text-gray-600">
                            ${ex.explanation.map(step => `<li>${step}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `}).join('');

            container.innerHTML = `
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-4xl font-bold text-yellow-600 font-title mb-2">Arena de Desafios üèÜ</h2>
                        <p class="text-gray-600">Teste sua l√≥gica contra quest√µes reais de competi√ß√µes.</p>
                    </div>
                    ${exercisesHtml}
                </div>
            `;
        }

        // --- INTERACTIVE LOGIC ---
        function revealStep(exampleId, exampleIndex, sectionId) {
            const data = contentData[sectionId];
            const example = data.examples[exampleIndex];
            const currentIndex = window[`stepIndex_${exampleId}`];
            
            if (currentIndex < example.steps.length) {
                const container = document.getElementById(`steps-container-${exampleId}`);
                const stepText = example.steps[currentIndex];
                
                const div = document.createElement('div');
                div.className = 'step-box p-3 rounded-r text-gray-800 text-sm flex gap-4 items-center shadow-sm';
                div.innerHTML = `
                    <div class="bg-${data.color}-600 text-white w-8 h-8 flex-shrink-0 rounded-full flex items-center justify-center font-bold shadow-sm">${currentIndex + 1}</div>
                    <div class="flex-grow">${stepText}</div>
                `;
                container.appendChild(div);
                
                window[`stepIndex_${exampleId}`]++;
                
                // Button state logic
                if (window[`stepIndex_${exampleId}`] >= example.steps.length) {
                    const btn = document.getElementById(`btn-reveal-${exampleId}`);
                    btn.classList.add('opacity-50', 'cursor-not-allowed');
                    btn.innerHTML = `<span>Conclu√≠do! ‚úÖ</span>`;
                    document.getElementById(`btn-reset-${exampleId}`).classList.remove('hidden');
                }
            }
        }

        function resetStep(exampleId) {
            document.getElementById(`steps-container-${exampleId}`).innerHTML = '';
            window[`stepIndex_${exampleId}`] = 0;
            
            // Restore button
            const btn = document.getElementById(`btn-reveal-${exampleId}`);
            btn.classList.remove('opacity-50', 'cursor-not-allowed', 'hidden');
            btn.innerHTML = `<span>Resolver Passo a Passo</span> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" /></svg>`;
            
            document.getElementById(`btn-reset-${exampleId}`).classList.add('hidden');
        }

        function checkAnswer(questionId, selectedIndex) {
            const exercise = exercisesData.find(e => e.id === questionId);
            const buttons = document.querySelectorAll(`.option-btn-${questionId}`);
            const feedbackBox = document.getElementById(`feedback-${questionId}`);
            const solutionBox = document.getElementById(`solution-${questionId}`);
            const scoreDisplay = document.getElementById('score-display');
            
            // Prevent multiple clicks
            if(buttons[0].disabled) return;
            
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.remove('hover:bg-yellow-50', 'hover:border-yellow-400');
            });

            if (selectedIndex === exercise.correctIndex) {
                // Correct
                buttons[selectedIndex].classList.add('bg-green-100', 'border-green-500', 'text-green-800');
                feedbackBox.innerHTML = "<strong class='text-lg'>‚ú® Excelente! Resposta Correta!</strong>";
                feedbackBox.className = "p-4 rounded-lg mb-3 text-sm bg-green-50 text-green-800 border border-green-200";
                
                // Update Score
                currentScore += 10;
                scoreDisplay.innerText = currentScore;
                scoreDisplay.parentElement.classList.add('bg-green-400', 'text-white');
                setTimeout(() => scoreDisplay.parentElement.classList.remove('bg-green-400', 'text-white'), 500);
                
            } else {
                // Incorrect
                buttons[selectedIndex].classList.add('bg-red-100', 'border-red-500', 'text-red-800');
                buttons[exercise.correctIndex].classList.add('bg-green-50', 'border-green-300', 'ring-2', 'ring-green-400'); // Highlight correct
                feedbackBox.innerHTML = "<strong>Ops, n√£o foi dessa vez.</strong> O correto est√° destacado em verde.";
                feedbackBox.className = "p-4 rounded-lg mb-3 text-sm bg-red-50 text-red-800 border border-red-200";
            }
            
            feedbackBox.classList.remove('hidden');
            solutionBox.classList.remove('hidden');
            solutionBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Initialize
        renderSection('triangulos');
    </script>
</body>
</html>
